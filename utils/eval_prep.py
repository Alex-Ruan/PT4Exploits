import os
import sys
eval_dir=sys.argv[1]
#'gen_model_pt_IP_blank'
f = open(os.path.join(eval_dir, 'test_1.gold'))
f2 = open(os.path.join(eval_dir, 'test_1.output'))
gold_list = f.readlines()
output_list = f2.readlines()


def clean_code(code_list):
    for i in range(0, len(code_list)):
        if code_list[i][-1] == '\n':
            code_list[i] = code_list[i][:-1]
        tab_index = code_list[i].index('\t')
        code_list[i] = code_list[i][tab_index + 1:]
    return code_list


gold_list = clean_code(gold_list)
output_list = clean_code(output_list)

f3 = open(os.path.join(eval_dir, 'test_1.hyp'), 'w+')
f4 = open(os.path.join(eval_dir, 'test_1_true.gold'), 'w+')
for s in output_list:
    f3.write(s + '\n')
f3.close()
for s in gold_list:
    f4.write(s + '\n')
f4.close()
print('Final Evaluation, first: test_1.output->test_1.hyp, test_1.gold->test_1_true.gold')
